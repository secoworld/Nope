
{% block header %}
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <!-- 设置标志和折叠特效，更加适合自适应界面 -->
        <div class="navbar-header">
            <!-- 设置折叠页面的按钮 -->
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                data-target="#navbar-collapse-head">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="{% url 'blog:home'%}" class="navbar-brand" style="font-size:2em;">LT</a>
        </div>

        <!-- 折叠的内容 -->
        <div class="collapse navbar-collapse" id="navbar-collapse-head">
            <ul class="nav navbar-nav nav-pills" style="font-size:16px;">

                <!-- {% for cate in categorys %}
                <li class="nav-item "><a href="{% url 'blog:category' cate.name %}" class="nav-link">{{ cate.name }}</a> </li>
                {% endfor %} -->

                <!-- 手动设置目录 -->
                <li class="nav-item "><a href="{% url 'blog:category' 'code' %}" class="nav-link"><span class="glyphicon glyphicon-th-large span-icon" aria-hidden="true"></span>编程</a> </li>
                <li class="nav-item "><a href="{% url 'blog:category' 'read' %}" class="nav-link"><span class="glyphicon glyphicon-book span-icon" aria-hidden="true"></span>读书</a> </li>
                <li class="nav-item "><a href="{% url 'blog:category' 'movie'%}" class="nav-link"><span class="glyphicon glyphicon-film span-icon" aria-hidden="true"></span>电影</a> </li>
                <li class="nav-item "><a href="{% url 'blog:category' 'life' %}" class="nav-link"><span class="glyphicon glyphicon-user span-icon" aria-hidden="true"></span>日常闲聊</a> </li>


                <!-- <li class="nav-item active" ><a href="#" class="nav-link">电影</a></li>
                    <li class="nav-item"><a href="#" class="nav-link">读书</a></li>
                    <li class="nav-item"><a href="#" class="nav-link">摄影</a></li>
                    <li class="nav-item"><a href="#" class="nav-link">旅游</a></li> -->
            </ul>

            <!-- 导航栏的的搜索框 -->
            <div class="search navbar-right">
                <form class="navbar-form navbar-left" method="get" action="{% url 'blog:search' %}" >
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search" id="search" name="search">
                    </div>
                    <button type="submit" class="btn btn-default">
                        提交
                    </button>
                </form>

                {% if user.is_authenticated %}
                <!-- 如果用户已经登录，则显示用户名和下拉菜单 -->
                <span class="nav navbar-nav ">
                    <ul class="nav navbar-nav text-center" style="font-size:16px;">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="{% url 'blog:home'%}admin" id="navbarDropdown"
                                role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                {{ user.username }}
                            </a>
                            <!-- <div class="dropdown-menu" aria-labelledby="navbarDropdown"> -->
                            <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu1">
                                <li><a class="dropdown-item" href="{% url 'blog:home'%}admin" class="nav-link">用户管理</a></li>
                                <li><a class="dropdown-item" href="#" onclick="user_delete()">删除用户</a></li>
                                <li><a class="dropdown-item" href="{% url 'userprofile:logout'%}">退出登录</a></li>
                            </ul>

                        </li>
                    </ul>
                </span>

                {% else %}
                <!-- 如果用户没有登录，则显示登录按钮 -->
                <!-- 登陆/注册 -->
                <span class="nav navbar-nav ">
                    <ul class="nav navbar-nav text-center" style="font-size:16px;">
                        <!-- <li class="nav-item"><a href="{% url 'blog:home'%}admin" class="nav-link">登录|注册</a></li> -->
                        <li class="nav-item"><a href="{% url 'userprofile:login' %}" class="nav-link">登录</a></li>
                    </ul>
                </span>
                <!-- 结束判断是否登录 -->
                {% endif%}
            </div>

        </div>
    </div>
</nav>

{% if user.is_authenticated %}
<script>
    function user_delete(){
        // 调用layer弹窗组件
        layer.open({
            title: "确认删除",
            content: "确认删除用户资料吗？",
            yes: function(index, layero){
                location.href = "{% url 'userprofile:delete' user.id %}"
            }
        });
    }
</script>
{% endif %}

{% endblock header %}